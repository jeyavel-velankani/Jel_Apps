<table class='programming_tabs' cellspacing='0' border='0'>
    <tbody>
        <tr>
        	<% @page.tabs.each_with_index do |tab, index| %>	
				<% if eval_expression(tab.show) && tab.mcfcrc == Gwe.mcfcrc %>           
				    <td cardnumber='<%= index + 1 %>' page_type='programming' page_name='<%= tab.link %>' class='leftnav contenttab track_menu_link contenttabU <%= eval_expression(tab.enable) ? "enable" : "disable programming_disable" %>' width="95" style='background-image: url(images/Tab.png); height: 32px;'>
		                <span><%= tab.name %></span>
		            </td>            
				<% end %>
			<% end %>
			<td class='spinner'><%= image_tag("/images/large-loading.gif", :border => '0') %></td>
		</tr>
    </tbody>
</table>

<style type="text/css">
	.spinner {
	    padding-left: 10px;
	    display: none;
	}
</style>
<script type='text/javascript'>
	$(document).ready(function(){
	   var page_name = "<%= @page.page_name %>";
	   var content_tabs = jQuery(".track_menu_link", window.parent.document);
	   var tab_count = 0;
	   $.each(content_tabs, function(i, ele){
		  if($(ele).attr('page_name') == page_name && !$(ele).hasClass('disabled')){
		  	tab_count += 1;		  	
		  	$(ele).trigger('click');
			return false;
		  }
	   });
	   if(tab_count == 0){
	   		$.each(content_tabs, function(i, ele){
			  if(!$(ele).hasClass('disabled')){
			  	$(ele).trigger('click');
				return false;
			  }
		   });
	   }
	   	
	});	
</script>