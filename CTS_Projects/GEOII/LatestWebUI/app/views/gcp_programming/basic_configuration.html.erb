<%#= javascript_include_tag "jquery-1.3.2.min" %>
<%#= javascript_include_tag "jquery-ui-1.7.2.custom.min" %>
<%#= javascript_include_tag "timepicker" %>

<script type="text/javascript" src="/javascripts/basic_config.js"></script>

<style type="text/css">
    <!--
	#basic_cfg_track1_setParam {
	    display: none;
	}
    -->
  <!--
  #SIN {
    display: none;
  }

  #LOCATION {
    display: none;
  }

  #TIME {
    display: none;
  }
  -->
</style>

<script>

var _url = "<%=url_for(:action => :get_valid_expressions,:id=>params[:id],:page=>params[:page]) %>";

  function setdefaultvalues_template(){
    if(window.confirm('set template defaults')){
        document.getElementById("templateDefaults").href = "../../gcp_programming/feeders/set_defaults";
    }

}

  function prevfNextcreateLinks(e,url){
    var img_load = "<img src='/images/ajax-loader.gif' alt='loading...' />";
    $("#jqueryLink").click(function(){
      $("#contentcontents")
      .html(img_load)
      .load(url, null, function(responseText){
      });
    });
  }

  function displayscreen(page_name)
  {

    if(page_name=='SIN')
    {
      document.getElementById("SIN").style.display='block'
      document.getElementById("LOCATION").style.display='none'
      document.getElementById("TIME").style.display='none'
    }

    if(page_name=='LOCATION')
    {
      document.getElementById("SIN").style.display='none'
      document.getElementById("LOCATION").style.display='block'
      document.getElementById("TIME").style.display='none'
    }

    if(page_name=='TIME')
    {
      document.getElementById("SIN").style.display='none'
      document.getElementById("LOCATION").style.display='none'
      document.getElementById("TIME").style.display='block'
    }
  }

  function setsiteinfo(){
    datepick = document.getElementById('datepicker').value
    begin_hour = document.getElementById('start_time_begin_hour').value
    begin_minute = document.getElementById('start_time_begin_minute').value
    begin_second = document.getElementById('start_time_begin_second').value
    window.location.href="../../gcp_programming/feeders?datepick="+datepick+"&begin_hour="+begin_hour+"&begin_minute="+begin_minute+"&begin_second="+begin_second;
  }

  function refreshsiteinfo(){
    window.location.href="../../gcp_programming/feeders?refreshsiteinfo=refreshsiteinfo";
  }

  function getsiteinfo(){
    var now = new Date();
    var date = now.getDate();
    var month = now.getMonth()+1;
    var year = now.getFullYear();
    var hour = now.getHours();
    var minute = now.getMinutes();
    var second = now.getSeconds();


    document.getElementById('start_time_begin_hour').options[hour].selected= true
    var mm_dd_yy = month+"/"+date+"/"+year;
    document.getElementById('datepicker').value = mm_dd_yy

    document.getElementById('start_time_begin_minute').options[minute].selected= true
    document.getElementById('start_time_begin_second').options[second].selected= true
  }

  function refreshlocationinfo(){
    window.location.href="../../gcp_programming/feeders?refreshlocation=refreshlocation";
  }

  function applylocationinfo(){
    mile_post = document.getElementById('mileno').value
    site_name = document.getElementById('sitename').value
    filler = document.getElementById('filler').value
    dot_number = document.getElementById('dotcross').value
    window.location.href="../../gcp_programming/feeders?applylocation=applylocation&mile_post="+mile_post+"&site_name="+site_name+"&filler="+filler+"&dot_number="+dot_number;
  }

  $(function(){
    $("#datepicker").datepicker({
      showOn: 'button',
      buttonImage: '/images/calendar.gif',
      dateFormat:'mm/dd/yy'
    });
  });

  function setrefreshvalues(){
    var date = '<%=@day%>';
    var month = '<%=@mon%>';
    var year = '<%=@yr%>';
    var hour = '<%=@hrs%>';
    var minute = '<%=@mins%>';
    var second = '<%=@secs%>';

    document.getElementById('start_time_begin_hour').options[hour].selected= true

    var mm_dd_yy = month+"/"+date+"/"+year;
    document.getElementById('datepicker').value = mm_dd_yy

    document.getElementById('start_time_begin_minute').options[minute].selected= true
    document.getElementById('start_time_begin_second').options[second].selected= true
  }

</script>

<div class='right_content1' id="dycontent">

<%= render 'layouts/partials/basic_config_logs_header' %>
<div id="basic_cfg_track1">
  <input type="hidden" name="tempObjVal" id="tempObjVal" value="" />

<% count_var =0 %>
<% temp_array=[]
%>

  <% if @menu_items %>
      <% @menu_items.each do |v| %>
          <% temp_str="\n" %>
          <div  class="text_deco">
              <a href = "<%= "../basic_track1/#{v[:link]}/?page=#{v[:link]}" || '#' %>" id = "<%= v[:page_name] %>" style="text-decoration: none;" class='sub_menu_link_item'><font color="#23CCAA"><%= v[:menu_name] %></font></a>
          </div>
      <% end %>
<% end %>

<%
    if @pageParams
      @pageParams.each do |v| %>

             <% if @show_enable[count_var][:show_status]==true %>
                <% temp_str="\n" %>
                <div  class="text_deco">
                  <% temp_str=temp_str+v.parameter_name %>

                     <%
                              if @page.menus[count_var]
                                  checkDefault = @page.menus[count_var][:menu_name]
                              end
                        %>

                        <% if @curvalarray1[count_var]=="No" || @curvalarray1[count_var]=="Not Used" || @curvalarray1[count_var]=="PSO" || checkDefault=="Set Template Defaults" %>
                            <% if v[:menu_name]!="(NULL)" %><%= v[:menu_name] %><% else  %><%="#{v.param_long_name}"%><%  end %>
                        <% else %>
                        
                            <%  page_name=""
                             if  @page.menus[count_var]
                                page_name = @page.menus[count_var][:menu_name]
                             end
                            %>
                            
                            <% if params[:id]=="SEAR" || params[:id]=="SITE:  programming" %>
                                <%="#{v.param_long_name}"%>
                            <% else %>
                                <a href = "<%= "../basic_track1/#{v[:page_name]}/?page=#{page_name}" || '#' %>" id = "<%= v[:page_name] %>" style="text-decoration: none;" class='sub_menu_link_item'><font color="#23CCAA"><% if v[:menu_name]!="(NULL)" %><%= "#{v[:menu_name]}" %><% else  %><%= "#{v.param_long_name}"%><%  end %></font></a>
                            <% end %>
                                  
                            <% end %>

                                      <% if @show_enable[count_var][:enable_status]==false %>
                                        <span style="color:green;float: right;margin-right: 10px">
                                          <a id="<%=v.parameter_name%>" href="#" onclick="ChangeWindow('<%=v.parameter_name%>','<%=v.parameter_name%>','<%=v.parameter_type%>','<%=v.card_index%>','<%=v.parameter_index%>','<%=v.param_long_name%>','','','<%=v.data_type%>','<%=count_var%>','<%=v.parameter_name%>')" style="text-decoration:none"> <%=@curvalarray1[count_var]%></a>
                                        </span>
                                      <% else %>
                                        <span style="color:grey;float: right;margin-right: 10px">
                                          <%=@curvalarray1[count_var]%>
                                        </span>
                                      <% end %>

                </div>

		<% if @page.menus[count_var]  %>
                <% if @page.menus[count_var][:menu_name] %>

                <% if @page.menus[count_var][:menu_name].strip=="Set Template Defaults" %>

                     <a href="#" id="templateDefaults" style="text-decoration: none;" onclick="setdefaultvalues_template()"><font color="#23CCAA" size="2">Set Template Defaults</font></a>

                  <% end end end%>

                <% end %>
                <% count_var = count_var+1 %>

  <% end end %>
  <% session[:page_parameters]=temp_array %>
<br></br>

<% if params[:id]!=nil && params[:page]!=nil %>
      <div id="jqueryLink">
          <a href="../../../gcp_programming/feeders/<%="#{params[:id]}"%>" style="text-decoration: none;" class='menu_link_item'><u>Back</u></a>
        </div>
<% end %>

</div>

     <% if @response!=nil %>
  <script>setrefreshvalues()</script>
     <%end%>

<div id="basic_cfg_track1_setParam">
      <%= render 'layouts/partials/update_values' %>
</div>

</div>